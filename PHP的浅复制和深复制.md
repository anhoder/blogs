# PHPçš„æµ…å¤åˆ¶å’Œæ·±å¤åˆ¶

*Mission Start!*

å¾ˆæ—©å°±æ¥è§¦åˆ°äº†è¿™ä¸ªä¸œè¥¿ï¼Œåªæ˜¯æ²¡æœ‰ç³»ç»Ÿçš„å»äº†è§£ï¼Œå†™ä¸ªåšå®¢åŠ æ·±è®°å¿† :)ã€‚

## ä¸€ã€æ¦‚å¿µ
**æµ…å¤åˆ¶**ï¼šå¼•ç”¨èµ‹å€¼ï¼Œå¤åˆ¶çš„å˜é‡å’Œè¢«å¤åˆ¶çš„å˜é‡æŒ‡å‘åŒä¸€ä¸ªä½ç½®ï¼Œå¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œä¿®æ”¹ä¼šå¯¼è‡´ä»å¦ä¸€ä¸ªå˜é‡è®¿é—®çš„å€¼ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼›    
    
**æ·±å¤åˆ¶**ï¼šå®Œå…¨å¤åˆ¶ï¼Œä¸¤ä¸ªå˜é‡ç›¸äº’ç‹¬ç«‹ï¼Œä¸äº§ç”Ÿå½±å“ã€‚   
   
## äºŒã€è¯¦ç»†åŒºåˆ«
### 1ã€æƒ…å†µä¸€ 
æœ€å¸¸è§çš„å°±æ˜¯**æ™®é€šå˜é‡**å’Œ**å¯¹è±¡**ä¹‹é—´çš„åŒºåˆ«ï¼š   
> æ™®é€šå˜é‡èµ‹å€¼æ—¶æ˜¯æ·±æ‹·è´ï¼Œå…·ä½“é‡‡ç”¨çš„æ˜¯*å¼•ç”¨è®¡æ•°+å†™æ—¶å¤åˆ¶*ï¼Œå› æ­¤åœ¨è¿›è¡Œå€¼çš„ä¿®æ”¹æ—¶ä¸¤ä¸ªå˜é‡ä¹‹é—´æ˜¯äº’ä¸å½±å“çš„ã€‚   
> è€Œå¯¹äºå¯¹è±¡æ¥è¯´ï¼Œåˆ™æ˜¯ä½¿ç”¨å¼•ç”¨èµ‹å€¼ï¼ˆèµ‹å€¼ã€ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ï¼‰ï¼Œå³æµ…å¤åˆ¶ï¼Œä¸¤ä¸ªå˜é‡ä¹‹é—´ä¼šç›¸äº’å½±å“ã€ç›¸äº’ç¾ç»ŠğŸ˜ã€‚  
 
ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š   

```php
// æ™®é€šå˜é‡
$a = 'åŸå€¼';
$b = $a;        // æ­¤æ—¶ï¼Œ$aå’Œ$bçš„å€¼éƒ½ä¸º'åŸå€¼'
$b = 'ä¿®æ”¹çš„å€¼'; // $aä¸º'åŸå€¼'ï¼Œ$bä¸º'ä¿®æ”¹çš„å€¼'

// å¯¹è±¡
class C
{
    public $var = 'åŸå€¼';
}
$c = new C();   // $c->varçš„å€¼ä¸º'åŸå€¼'
$d = $c;
$d->var = 'ä¿®æ”¹çš„å€¼';   // æ­¤æ—¶$c->varä¸º'ä¿®æ”¹çš„å€¼'ï¼Œ$d->varä¹Ÿä¸º'ä¿®æ”¹çš„å€¼'
```

é‚£å¦‚æœæƒ³è¦å¯¹å¯¹è±¡è¿›è¡Œæ·±æ‹·è´åº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿåœ¨PHPä¸­æä¾›äº†**clone**å¯ä»¥å®ç°ã€‚å¦‚ï¼š

```php
class A
{
    public $var = 'åŸå€¼';
}
$a = new A();
$b = clone $a;
$b->var = 'ä¿®æ”¹çš„å€¼';
echo $a->var, PHP_EOL;  // åŸå€¼
echo $b->var, PHP_EOL;  // ä¿®æ”¹çš„å€¼
```
### 2ã€æƒ…å†µäºŒ
ç”¨ä¸Šè¿°æ–¹æ³•å¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥è¿›è¡Œæµ…èµ‹å€¼ï¼Œä½†å¦‚æœè¢«å¤åˆ¶å¯¹è±¡ä¸­å­˜åœ¨å¯¹è±¡å±æ€§çš„è¯ï¼ŒåŸå¯¹è±¡çš„æ™®é€šå¯¹è±¡ä¼šè¢«æ·±å¤åˆ¶ï¼Œè€ŒåŸå¯¹è±¡çš„å¯¹è±¡å±æ€§è¿˜æ˜¯è¿›è¡Œæµ…å¤åˆ¶ï¼ˆå¼•ç”¨èµ‹å€¼ï¼‰ã€‚ä¾‹å¦‚ï¼š

```php
class A
{
    public $var_a = 'class A';
}
class B
{
    public $var_b = 'class B';
    public $var_b_obj;
    
    public function __construct()
    {
        $this->var_b_obj = new A();
    }
}
$one = new B();
$two = clone $one;
// $one->var_bå’Œ$two->var_béƒ½ä¸º'classB'
// $one->var_b_obj->var_aå’Œ$two->var_b_obj->var_aéƒ½ä¸º'classA'
$two->var_b = 'new class B';
$two->var_b_obj->var_a = 'new class A'; 
// è‡³æ­¤ï¼Œ$one->var_b='class B'ï¼Œ$two->var_b='new class B'
// $one->var_b_obj->var_aå’Œ$two->var_b_obj->var_aéƒ½ä¸º'new class A'
```
    
å¯¹äºè¿™ç§åŠæ³•å¦‚ä½•å®ç°æ·±å¤åˆ¶å‘¢ï¼Ÿ

#### æ–¹æ³•ä¸€
ä½¿ç”¨__cloneé­”æœ¯æ–¹æ³•è¿›è¡Œå¤åˆ¶ã€‚å¦‚ï¼š

```php
class A{}
class B
{
    public $obj;
    
    public function __construct()
    {
        $this->obj = new A();
    }
    
    public function __clone()
    {
        $this->obj = clone $this->obj;
    }
}
```
#### æ–¹æ³•äºŒ
ä½¿ç”¨åºåˆ—åŒ–(serialize)å’Œååºåˆ—åŒ–(unserialize)å®ç°ã€‚å¦‚ï¼š

```php
class A {}
class B
{
    public $a;
    
    public function __construct()
    {
        $this->a = new A();
    }
}
$one = new A();
$temp = serialize($one);
$two = unserialize($temp); // æ­¤æ—¶çš„$twoä¸$oneæ˜¯ä¸ä¼šå½±å“çš„ä¸¤ä¸ªå˜é‡
```

> **æ³¨æ„ï¼šè‹¥ä½¿ç”¨json_encodeå’Œjson_decodeå°†ä¸¢å¤±åŸå¯¹è±¡ä¸­çš„æ–¹æ³•**

*Mission Complete!*


